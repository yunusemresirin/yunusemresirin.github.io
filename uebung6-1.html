<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="stylesheet.css">
        <style>
            root {
                --color--input: rgb(0,0,0);
            }
        </style>
    </head>
    <body>
        <nav>
            <a href="uebung6.html">Zurueck</a>
        </nav>

        <h3>6.1 Klammerpaare</h3>
        <form>
            <label for="input">Geben Sie bitte eine beliebige <b>Zeichenkette</b> mit beliebig vielen <b>Klammerpaaren</b> hier ein:</label>
            <input type="text" id="inputField" placeholder="Zeichenkette" oninput="checkInput()">
        </form>

        <script>
            var input = document.getElementById('inputField');

            function checkInput() {
                event.preventDefault();

                let valid = isValid( input.value );
                input.style.background = !valid ? 'rgb(255, 215, 215)' : 'white';
                input.style.color = !valid ? 'red' : 'green';
            }

            function isValid( value ) {
                let c_l = 0, c_r = 0; // Curled Braces
                let a_l = 0, a_r = 0; // Array Brackets
                let t_l = 0, t_r = 0; // Parentheses

                for( let [index, char] of [...value].entries() ) {
                    switch (char) {
                        case '{':
                            [...value].slice(index+1).reverse().forEach((c) => { if(c === '{' && c_l > c_r) return false })
                            c_l++;
                            break;
                        case '[': 

                            a_l++;
                            break;
                        case '(': 

                            t_l++;
                            break;
                        case '}': 

                            c_r++;
                            break;
                        case ']': 

                            a_r++;
                            break;
                        case ')': 
                            
                            t_r++;
                            break;
                        default:
                            break;
                    }
                }

                return c_l === c_r & a_l === a_r & t_l === t_r;
                // return value === 'valid' ? false : true;
            }
        </script>
    </body>
</html>